# 기본 로케일에서 String.format 사용
`String.format` 메서드는 기본 언어 로케일 상태로 실행할 때가 많다.
그러나 기본 로케일을 따라 부동소수점 숫자를 가공하면 가끔 문제가 생긴다.
미국과 한국 등의 로케일은 소수점 구분자가 `.`이지만 독일등의 몇몇 나라는 `,`이다.
```java
double d = 1.234;
System.out.printf(Locale.KOREA, "%.2f%n", d);
System.out.printf(Locale.GERMAN, "%.2f%n", d);
```
사용자에게 출력할 숫자는 구분자가 약간 달라도 별 문제가 없다.
그러나 프로그램이 이 숫자를 다시 파싱하려할 때는 문제가 된다.

```java
String germanFormat = String.format(Locale.GERMAN, "%.2f", d);
double parseGermanFormat = Double.parseDouble(germanFormat);
```
`Double.parseDouble()` 메서드가 로케일과 상관 없이 `.` 문자를 소수점 구분자로 사용하기 때문이다.

> 실수 방지 가이드
* `parseDouble()`처럼 로케일과 무관한 메서드와 `String.format()`처럼 로케일을 인식하는 메서드를 함께 사용하지 않는다.
만일 여러 로케일에 공통적으로 쓰일 숫자를 다루려면 다음과 같이 포매팅과 파싱을 하나의 NumberFormat 객체로 통일하는 것이 좋다.

```java
import java.text.NumberFormat;

NumberFormat format = NumberFormat.getInstance(locale);
double input = 12345.67;
String str = format.format(input);
double output = format.parse(str).doubleValue();
```
* `String.format()` 이나 `NumberFormat.getInstance()` 등의 메서드는 결과 문자열이 쓰일 상황을 감안해서 사용해야 한다.
필요한 경우, 첫 번째 인수에 특정 로케일을 명시적으로 지정할 수 있다.
* 기본 로케일은 최선의 선택이 아님을 명심하라.
* 특히 백엔드 애플리케이션을 개발할 때는 서버의 기본 로케일과 사용자의 로케일이 다를 수 있다.