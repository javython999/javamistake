# 잘못된 날짜 포맷
자바에서 날짜와 시간 포맷은 특수한 패턴 언어로 나타낸다.
이 언어는 `java.text.SimpleDateFormat` 생성자 또는 신형 API인 `java.time.format.DateTimeFormatter.ofPattern()` 메서드 등에서 사용한다.
```java
String time = DateTimeFormatter.ofPattern("HH:mm:ss")
        .format(LocalDateTime.now());
```
이 패턴의 문제는 같은 글자도 소문자와 대문자의 의미가 달라 일일이 기억하기 어렵다는 것이다.
* 대문자 M은 월을, 소문자 m은 분을 나타낸다.
* 대무자 D는 연도의 일차를, 소문자 d는 월의 일차를 나타낸다.
* 대문자 S는 초의 소수점 이후를 나타내고, 소문자 s는 초를 나타낸다.
* 대문자 Y는 주 단위 연도를 나타내고, 소문자 y는 일반 연도를 나타낸다.

이들을 잘못 썼을 경우, 실수를 바로 알아차리기 어렵다.
예를 들어 방금 코드에서 실수로 `HH:mm:SS`를 쓰면 초 대신 초의 소수점 이하 두자리가 들어간다.
간혹 `HH:MM:ss` 또는 `HH:MM:SS` 처럼 분을 대문자로 통일해버리는 실수도 발생한다.
전부 대문자를 쓰면 가지런해보이기는 하지만 분 대신 월이 잘 못들어가게 된다.

가장 거슬리는 실수는 소문자 y대신 대문자 Y를 쓰는 것이다.
주 단위 연도(또는 ISO 연도)는 대체로 일반 연도와 동일하지만 연도가 바뀌기 전후 며칠 동안은 달라질 수 있다.
주 단위 연도는 52주 또는 53주로 구성되며 월요일을 한 주의 시작으로 본다.
따라서 새해가 월요일에 시작되지 않으면 주 단위 연도는 며칠 일찍 또는 늦게 시작된다.
가령 2021년의 주 단위 연도는 1월 4일에 시작되었다. 결과적으로 다음 코드는 뜻 밖의 결과를 낸다.

```java
String date = DateTimeFormatter.ofPattern("YYYY-MM-dd")
        .format(LocalDate.of(2021, 1, 3));
System.out.println(date); // 2020-01-03
```
일년 중 단 며칠을 제외하면 대부분의 날짜에서 YYYY와 yyyy 포맷은 동일하게 변환된다.
그래서 이 문제는 테스트로 발견하지 못하는 경우가 종종 있다.

> 실수 방지 가이드
* 날짜와 시간 포매팅 패턴은 항상 특수한 입력값을 기준으로 테스트하고 예상 결과와 비교한다.
또한 ISO 연도가 실제 연도와 다르게 변화되는 입력값을 추가한다.
* 날짜와 시간 포매팅 패턴은 종류를 줄이고 이를 상수로 추출한 다음 모든 곳에서 재사용한다.
패턴 리터럴이 적을수록 실수할 기회도 줄어든다.
