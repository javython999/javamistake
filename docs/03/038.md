# 음수 바이트
자바에서 `byte` 원시 타입은 -128~127 사이의 숫자를 저장한다.
바이트라하면 일반적으로 0~255 사이의 값으로 이해한다는 점을 감안하면, 다소 직관에 반하는 숫자 범위라 할 수 있다.

```java
int readTwoBytes() {
    byte lo = readLowByte();
    byte hi = readHiByte();
    return (hi << 8) | lo;
}
```
두 개의 바이트로 하나의 숫자를 만드는 코드이며 언뜻 보면 아무 문제도 없다.
그러나 0~127 사이일 때만 의도대로 작동한다.
readLowByte()가 -1을 반환할 경우 이 값은 int 타입으로 확장되고 16진수로 표현하면 0xFFFFFFFF가 된다.
따라서 readTowBytes 메서드는 hi 값에 관계 없이 -1을 반환한다.

> 실수 방지 가이드
* 바이트로 비트 연산을 할 때는 음수를 고려한다. 바이트가 확장되면서 상위 비트가 1로 채워진다. 이 효과를 무효화시키려면 다음과 같이 마스크를 입혀야 한다.
```java
return ((hi & 0xFF) << 8) | (lo & 0xFF);
```
* 저수준 비트 조작 연산은 유틸리티 메서드로 캡슐화하고 철저히 테스트한다. 그리고 이를 프로젝트 전반에 걸쳐 재사용하면 추가 문제를 방지할 수 있다.