# 잘못된 클램핑 순서
입력된 숫자를 주어진 범위에 맞추어 조정할 때, 다음과 같이 if 문을 연달아 사용하곤 한다.
```java
if (value < 0) {
    value = 0;    
}

if (value > 100) {
    value = 100;
}
```

또는 조건 표현식으로 다음과 같이 작성할 수 있다.
```java
value = value < 0 ? 0 : value > 100 ? 100 : value;
```
이 코드는 다소 장황해 보인다. 하한값과 상한값을 두 번씩 언급하고 있기 때문이다. 
게다가 여기에 단순한 숫자가 아닌 값이 들어가면 더 복잡해질 것이다.
반복되는 표현을 개선하기 위해 다음과 같이 Math.min()과 Math.max() 호출을 조합했다고 가정해보자.

```java
value = Math.max(0, Math.min(value, 100));
```
이 표현식은 간단하면서도 영리해 보이지만 구조적으로 에러에 취약하다.
전체적 표현식이 직관적이지 않기에 다음과 같이 실수로 max와 min 호출을 뒤바꾸기 쉽다.

```java
value = Math.min(0, Math.max(value, 100));
```
이렇게 되면 결과는 항상 0이 되지만 표현식만 보고 문제를 알아차리기는 어렵다.

> 실수 방지 가이드 
* `Math.min()`과 `Math.max()` 메서드는 신중하게 사용한다. 첫번째 피연산자가 더 클 때와 작을 때 어떤 결과가 나오는지 검토해야 한다. `min()`, `max()`를 뒤바꾸는 실수는 맥락을 가리지 않고 벌어진다.
* 혼란스러운 코드 패턴이 늘 그렇듯, 유틸리티 메서드로 추출하고 모든 곳에서 일괄적으로 사용하는 것이 가장 좋다.
```java
public static int clamp(int value, int min, int max) {
    if (min > max) {
        throw new IllegalArgumentException(min + " > " + max);
    }
    
    return Math.max(min, Math.min(max, value));
}
```
